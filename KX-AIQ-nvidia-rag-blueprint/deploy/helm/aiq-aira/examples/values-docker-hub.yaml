# SPDX-FileCopyrightText: Copyright (c) 2025 KX Systems, Inc. All rights reserved.
# SPDX-License-Identifier: Apache-2.0
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# =============================================================================
# Docker Hub Deployment Example (AIQ-KX with KDB Integration)
# =============================================================================
#
# Uses pre-built AIQ-KX images from Docker Hub.
# These images include KDB integration (unlike base NVCR images).
#
# Usage:
#   helm upgrade --install aiq-kx ../. -n aiq --create-namespace \
#     -f values-docker-hub.yaml \
#     --set ngcApiSecret.password="$NVIDIA_API_KEY"
#
# =============================================================================

# Backend image configuration (KDB-enabled)
image:
  repository: docker.io/alattar43828/aiq-kx-backend
  tag: "kdb-discovery"
  pullPolicy: Always

# Frontend image configuration (KDB-enabled)
frontend:
  enabled: true
  image:
    repository: docker.io/alattar43828/aiq-kx-frontend
    tag: "latest"
    pullPolicy: Always
  service:
    type: NodePort
    port: 3000
    nodePort: 30080

# No imagePullSecret needed - images are public

# Use hosted NVIDIA NIMs (no local GPU required)
nim-llm:
  enabled: false

# Enable Redis for job tracking
redis:
  enabled: true

# Backend configuration
backendEnvVars:
  # LLM Configuration - Hosted NIMs
  INSTRUCT_BASE_URL: "https://integrate.api.nvidia.com/v1"
  NEMOTRON_BASE_URL: "https://integrate.api.nvidia.com/v1"
  INSTRUCT_MODEL_NAME: "meta/llama-3.3-70b-instruct"
  NEMOTRON_MODEL_NAME: "nvidia/llama-3.3-nemotron-super-49b-v1.5"

  # KDB-X Configuration - uses internal MCP server (deployed by kdb-x-mcp-server chart)
  KDB_ENABLED: "true"
  KDB_MCP_ENDPOINT: "http://kdb-mcp-kdb-x-mcp-server.aiq.svc.cluster.local:8000/mcp"
  KDB_MCP_INTERNAL: "true"  # Internal MCP - enables data loader
  KDB_TIMEOUT: "30"
